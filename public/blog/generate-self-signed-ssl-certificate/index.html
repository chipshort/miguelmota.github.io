<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>My New Hugo Site  | Generate Self-signed SSL Certificate</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">

    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.52" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/dist/css/app.d98f2eb6bcd1eaedb7edf166bd16af26.css" rel="stylesheet">
    

    

    
      
    

    

    <meta property="og:title" content="Generate Self-signed SSL Certificate" />
<meta property="og:description" content="Using HTTPS for your web application is a no-brainer, but sometimes it is not intuitively clear on how to get started on using SSL for your website. I&rsquo;m going to be going over step-by-step on generating a self-signed certficate and testing it out on a Node.js web server.
Generating Private Key First let&rsquo;s generate a private key. The private key is used to decrypt the data encrypted by the public key." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/blog/generate-self-signed-ssl-certificate/" />

<meta itemprop="name" content="Generate Self-signed SSL Certificate">
<meta itemprop="description" content="Using HTTPS for your web application is a no-brainer, but sometimes it is not intuitively clear on how to get started on using SSL for your website. I&rsquo;m going to be going over step-by-step on generating a self-signed certficate and testing it out on a Node.js web server.
Generating Private Key First let&rsquo;s generate a private key. The private key is used to decrypt the data encrypted by the public key.">



<meta itemprop="wordCount" content="767">



<meta itemprop="keywords" content="SSL,TLS,RSA,HTTP,encryption,security,Node.js," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Generate Self-signed SSL Certificate"/>
<meta name="twitter:description" content="Using HTTPS for your web application is a no-brainer, but sometimes it is not intuitively clear on how to get started on using SSL for your website. I&rsquo;m going to be going over step-by-step on generating a self-signed certficate and testing it out on a Node.js web server.
Generating Private Key First let&rsquo;s generate a private key. The private key is used to decrypt the data encrypted by the public key."/>

  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="http://example.org/" class="f3 fw2 hover-white no-underline white-90 dib">
      My New Hugo Site
    </a>
    <div class="flex-l items-center">
      

      
      











    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">

    <header class="mt4 w-100">
      <p class="f6 b helvetica tracked">
          
        BLOGS
      </p>
      <h1 class="f1 athelas mb1">Generate Self-signed SSL Certificate</h1>
      
      <time class="f6 mv4 dib tracked" datetime="0001-01-01T00:00:00Z">January 1, 0001</time>
      
      
    </header>

    <section class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l">

<p>Using HTTPS for your web application is a no-brainer, but sometimes it is not intuitively clear on how to get started on using SSL for your website.
I&rsquo;m going to be going over step-by-step on generating a <a href="https://en.wikipedia.org/wiki/Self-signed_certificate">self-signed certficate</a> and testing it out on a Node.js web server.</p>

<h2 id="generating-private-key">Generating Private Key</h2>

<p>First let&rsquo;s generate a private key. The private key is used to decrypt the data encrypted by the public key.
Only your server should have access to the private key.
The generated <a href="https://en.wikipedia.org/wiki/RSA_(cryptosystem)">RSA</a> key is 1024-bit <a href="https://en.wikipedia.org/wiki/Triple_DES">triple DES</a> encrypted.
It will ask you for a passphrase so make sure you remember it.</p>

<pre><code class="language-bash">openssl genrsa -des3 -out server.key 1024
</code></pre>

<p>The output:</p>

<pre><code class="language-bash">Generating RSA private key, 1024 bit long modulus
...............................++++++
..........................++++++
e is 65537 (0x10001)
Enter pass phrase for server.key:
Verifying - Enter pass phrase for server.key:
</code></pre>

<p>This will create a <code>server.key</code> file.</p>

<p>Note that if you do not want to use a passphrase for your key, you can remove it from the private key.</p>

<pre><code class="language-bash">openssl rsa -in server.key -out server.key
</code></pre>

<h2 id="generating-a-certificate-signing-request">Generating a Certificate Signing Request</h2>

<p>Next we need to issue a <a href="https://en.wikipedia.org/wiki/Certificate_signing_request">Certificate Signing Request (CSR)</a>, which is responsible for sending a message to a <a href="https://en.wikipedia.org/wiki/Certificate_authority">Certificate Authority (CA)</a> in order to apply for a <a href="https://en.wikipedia.org/wiki/Public_key_certificate">digital certificate</a> which certifies the ownership of the public key.
It will ask you for information for the certificate regarding your company and location. See the output after the command as an example.</p>

<pre><code class="language-bash">openssl req -new -key server.key -out server.csr
</code></pre>

<p>The output:</p>

<pre><code class="language-bash">Enter pass phrase for server.key:
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter '.', the field will be left blank.
--date: 2015-11-29T00:00:00-00:00
draft: false
---
Country Name (2 letter code) [AU]:US
State or Province Name (full name) [Some-State]:CA
Locality Name (eg, city) []:Los Angeles
Organization Name (eg, company) [Internet Widgits Pty Ltd]:My Company
Organizational Unit Name (eg, section) []:Information Technology
Common Name (e.g. server FQDN or YOUR name) []:localhost
Email Address []:email@example.com

Please enter the following 'extra' attributes
to be sent with your certificate request
A challenge password []:password
An optional company name []:My Company
</code></pre>

<p>This will create a <code>server.csr</code> file.</p>

<h1 id="generating-certificate">Generating Certificate</h1>

<p>Now we use the Certficate Signing Request file to self-sign a new <a href="https://en.wikipedia.org/wiki/X.509">X.509</a> Certificate, valid for 365 days.</p>

<pre><code class="language-bash">openssl x509 -req -days 365 -in server.csr -signkey server.key -out server.crt
</code></pre>

<p>The output:</p>

<pre><code class="language-bash">Signature ok
subject=/C=US/ST=CA/L=Los Angeles/O=My Company/OU=Information Technology/CN=localhost/emailAddress=email@example.com
Getting Private key
Enter pass phrase for server.key:
</code></pre>

<p>This will create the actual certificate <code>server.crt</code> file.</p>

<h2 id="using-ssl-certificate-with-node-js">Using SSL Certificate with Node.js</h2>

<p>Incorporating the Self-signed Certificate in Node.js in relatively straightfowward.
We map the file contents for the Private Key and the SSL Certificate in the <code>options</code> object for the node https server,
Try running the example below.</p>

<pre><code class="language-javascript">const https = require('https');
const fs = require('fs');

const options = {
  // Private Key
  key: fs.readFileSync('./ssl/server.key'),

  // SSL Certficate
  cert: fs.readFileSync('./ssl/server.crt'),

  // Passphrase for Private Key, if you used one.
  passphrase: 's0m3P4sZw0rD',

  // Make sure an error is not emitted on connection when the server certificate verification against the list of supplied CAs fails.
  rejectUnauthorized: false
};

const server = https.createServer(options, handlRequest);

function handlRequest(req, res) {
  res.writeHead(200);
  res.end('Served over SSL.\n');
}

server.listen(9000);
</code></pre>

<p>Now open up your browser and head over to <a href="https://localhost:9000">https://localhost:9000</a>.
You should get a browser warning like this one saying that the certificate could not be validated.</p>

<p><a href="{{ .Site.BaseURL }}/connection-not-private-proceed.png"><img src="{{ .Site.BaseURL }}/connection-not-private-proceed.png" alt="" /></a></p>

<p>This is normal since we&rsquo;re using this for development purposes. Go ahead and hit <em>Proceed to localhost</em>.</p>

<h1 id="trusting-the-certificate">Trusting The Certificate</h1>

<p>You probably noticed the ugly red x over the https lock icon since the certificate could not be validated by a CA.</p>

<p><a href="{{ .Site.BaseURL }}/ssl-lock-x.png"><img src="{{ .Site.BaseURL }}/ssl-lock-x.png" alt="" /></a></p>

<p>In order to get the nice green lock we can tell our operating system to always trust this certificate.</p>

<p>If you&rsquo;re on Mac OSX; Open up the <em>Keychain Acess</em> app and on the left sidebar click on <em>System</em> under <em>Keychains</em> and click on <em>Certificates</em> under <em>Category</em>.</p>

<p>Drag the certficate <code>server.crt</code> into here.</p>

<p><a href="{{ .Site.BaseURL }}/system-keychain.png"><img src="{{ .Site.BaseURL }}/system-keychain.png" alt="" /></a></p>

<p>Now double-click on the certificate you just added and under <em>Trust</em> options, next to <em>When using this certficate</em> select the <em>Always Trust</em> option.</p>

<p><a href="{{ .Site.BaseURL }}/certificate-always-trust.png"><img src="{{ .Site.BaseURL }}/certificate-always-trust.png" alt="" /></a></p>

<p>Enter your password when prompted and restart your browser.</p>

<p>Voilà, green lock.</p>

<p><a href="{{ .Site.BaseURL }}/ssl-lock-ok.png"><img src="{{ .Site.BaseURL }}/ssl-lock-ok.png" alt="" /></a></p>

<h1 id="conclusion">Conclusion</h1>

<p>It is standard practice to use a SSL certificate for web applications even if not planning on sharing confidential data with visitors. Having encrypted communication ensures trust with the user accessing your site. Hope this guide helped you get started on using SSL while developing.</p>
<ul class="pa0">
  
   <li class="list">
     <a href="/tags/ssl" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">SSL</a>
   </li>
  
   <li class="list">
     <a href="/tags/tls" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">TLS</a>
   </li>
  
   <li class="list">
     <a href="/tags/rsa" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">RSA</a>
   </li>
  
   <li class="list">
     <a href="/tags/http" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">HTTP</a>
   </li>
  
   <li class="list">
     <a href="/tags/encryption" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">encryption</a>
   </li>
  
   <li class="list">
     <a href="/tags/security" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">security</a>
   </li>
  
   <li class="list">
     <a href="/tags/node.js" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Node.js</a>
   </li>
  
</ul>
<div class="mt6">
        
      </div>
    </section>

    <aside class="w-30-l mt6-l">




  <div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
    <p class="f5 b mb3">Related</p>
    <ul class="pa0 list">
	   
	     <li  class="mb2">
          <a href="/bytes/openssl-cheatsheet/">OpenSSL Cheatsheet</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/bytes/arraybuffer-to-buffer/">How to convert an ArrayBuffer to Buffer</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/bytes/buffer-to-arraybuffer/">How to convert a Buffer to ArrayBuffer</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/bytes/open-terminal-tab-programatically/">How to open a Terminal tab programatically</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/blog/nodejs-and-nginx-on-ubuntu/">Node.js and Nginx on Ubuntu</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/bytes/gpg-encryption/">How to encrypt with GPG</a>
        </li>
	    
    </ul>
</div>

</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://example.org/" >
    &copy; 2019 My New Hugo Site
  </a>
    <div>










</div>
  </div>
</footer>

    

  <script src="/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
