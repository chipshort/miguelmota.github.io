<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>My New Hugo Site  | Memoization&amp;#58; Caching function results in JavaScript</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">

    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.52" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/dist/css/app.d98f2eb6bcd1eaedb7edf166bd16af26.css" rel="stylesheet">
    

    

    
      
    

    

    <meta property="og:title" content="Memoization&amp;#58; Caching function results in JavaScript" />
<meta property="og:description" content="Avoid recalcuation by caching and locally storing function results." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/blog/memoization-caching-function-results-in-javascript/" /><meta property="article:published_time" content="2013-10-30T00:00:00&#43;00:00"/>
<meta property="article:modified_time" content="2013-10-30T00:00:00&#43;00:00"/>

<meta itemprop="name" content="Memoization&amp;#58; Caching function results in JavaScript">
<meta itemprop="description" content="Avoid recalcuation by caching and locally storing function results.">


<meta itemprop="datePublished" content="2013-10-30T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2013-10-30T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="746">



<meta itemprop="keywords" content="JavaScript,memoization,cache," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Memoization&amp;#58; Caching function results in JavaScript"/>
<meta name="twitter:description" content="Avoid recalcuation by caching and locally storing function results."/>

  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="http://example.org/" class="f3 fw2 hover-white no-underline white-90 dib">
      My New Hugo Site
    </a>
    <div class="flex-l items-center">
      

      
      











    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">

    <header class="mt4 w-100">
      <p class="f6 b helvetica tracked">
          
        BLOGS
      </p>
      <h1 class="f1 athelas mb1">Memoization&amp;#58; Caching function results in JavaScript</h1>
      
      <time class="f6 mv4 dib tracked" datetime="2013-10-30T00:00:00Z">October 30, 2013</time>
      
      
    </header>

    <section class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><p><a href="http://en.wikipedia.org/wiki/Memoization">Memoization</a> (based on the word memorable) is technique that caches the result of a function in order to avoid recalculation the next time the same function is called. Initially when the function is executed, the result gets added to an object holding the calculated results. When the function is called again, it checks the results object to see if already contains the result and if it does then return it. If it&rsquo;s not cached, then calculate and store it. The code below is a modified version of the memoization example that I came across as I was reading <a href="http://jsninja.com/"><em>Secrets of the JavaScript Ninja</em></a> by <a href="http://ejohn.org/">John Resig</a>. I also added bit of code to store the result in <a href="http://www.w3.org/TR/webstorage/">local storage</a> so that we keep a copy of the results even after the page is refreshed.</p>

<p>Finding prime numbers is just a simple example. Where memoization shines is where complex algorithmic function take time to retun a value. It would be time expensive, for example if you were running an HTML5 game where the canvas needs to get redrawn 30 times a second, to execute the same time consuming function over and over again. With memoization the function only runs once (assuming the same parameters were passed in) and the result is cached for future use.</p>

<pre><code class="language-javascript">// Check for Local Storage Support
function supportLocalStorage() {
  try {
    return 'localStorage' in window &amp;&amp; window['localStorage'] != null;
  } catch (e) {
    return false;
  }
}

// Memoization function.
Function.prototype.memoized = function() {
  // Values object for caching results.
  this._values = this._values || {};
  // Stringify function arguments to make key.
  var key = JSON.stringify(Array.prototype.slice.call(arguments));

  // Check if result is cached
  if (this._values[key] !== undefined) {
    console.log('Loaded from cache: %s =&gt; %s', key, this._values[key]);
    return this._values[key]

  // Check if result is in local storage.
  } else if (supportLocalStorage &amp;&amp; localStorage[this.name+':'+key]) {
    console.log('Loaded from local storage: %s =&gt; %s', key, localStorage[this.name+':'+key]);
    return localStorage[this.name+':'+key];

    // Call the original function if result not found and store result.
  } else {
    var value = JSON.stringify(this.apply(this, arguments));
    // Store in local storage.
    if (supportLocalStorage) {
      localStorage[this.name+':'+key] = value;
    }
    console.log('New result: %s =&gt; %s', key, value);
    return this._values[key] = value;
  }
};

// Call the memoization function with the original function arguments.
Function.prototype.memoize = function() {
  var fn = this;
  return function() {
    return fn.memoized.apply(fn, arguments);
  };
};

// Check if number is prime function.
var isPrime = (function isPrime(num) {
  var prime = num != 1;
  for (var i = 2; i &lt; num; i++) {
    if (num % i == 0) {
      prime = false;
      break;
    }
  }
  return prime;
}).memoize(); // Make function memoizable.

// Some function that accepts arguments and returns an object.
var someFunc = (function obj(a,b,c) {
  return {foo: (new Date()).getTime()};
}).memoize();
</code></pre>

<script>
// Memoization technique.
// Try it. Open up the console on your browser and run:
// isPrime(5); // returns a boolean
// or someFunc('foo', 10); // returns an object
// The first time it will do the calculation and store the result,
// so next time you run isPrime(5) it will retrieve the result from
// the function's cache. The result is also stored in local storage
// so that it doesn't have to recalculate if you refresh the page.
// It'll retrieve the stored result from local storage.

// Check for Local Storage Support
function supportLocalStorage() {
  try {
    return 'localStorage' in window && window['localStorage'] != null;
  } catch (e) {
    return false;
  }
}

// Memoization function.
Function.prototype.memoized = function() {
  // Values object for caching results.
  this._values = this._values || {};
  // Stringify function arguments to make key.
  var key = JSON.stringify(Array.prototype.slice.call(arguments));

  // Check if result is cached
  if (this._values[key] !== undefined) {
    console.log('Loaded from cache: %s => %s', key, this._values[key]);
    return this._values[key]

  // Check if result is in local storage.
  } else if (supportLocalStorage && localStorage[this.name+':'+key]) {
    console.log('Loaded from local storage: %s => %s', key, localStorage[this.name+':'+key]);
    return localStorage[this.name+':'+key];

    // Call the original function if result not found and store result.
  } else {
    var value = JSON.stringify(this.apply(this, arguments));
    // Store in local storage.
    if (supportLocalStorage) {
      localStorage[this.name+':'+key] = value;
    }
    console.log('New result: %s => %s', key, value);
    return this._values[key] = value;
  }
};

// Call the memoization function with the original function arguments.
Function.prototype.memoize = function() {
  var fn = this;
  return function() {
    return fn.memoized.apply(fn, arguments);
  };
};

// Check if number is prime function.
var isPrime = (function isPrime(num) {
  var prime = num != 1;
  for (var i = 2; i < num; i++) {
    if (num % i == 0) {
      prime = false;
      break;
    }
  }
  return prime;
}).memoize(); // Make function memoizable.

// Some function that accepts arguments and returns an object.
var someFunc = (function obj(a,b,c) {
  return {foo: (new Date()).getTime()};
}).memoize();
</script>
<ul class="pa0">
  
   <li class="list">
     <a href="/tags/javascript" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">JavaScript</a>
   </li>
  
   <li class="list">
     <a href="/tags/memoization" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">memoization</a>
   </li>
  
   <li class="list">
     <a href="/tags/cache" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">cache</a>
   </li>
  
</ul>
<div class="mt6">
        
      </div>
    </section>

    <aside class="w-30-l mt6-l">




  <div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
    <p class="f5 b mb3">Related</p>
    <ul class="pa0 list">
	   
	     <li  class="mb2">
          <a href="/blog/screenshots-with-getusermedia-api/">Screenshots with getUserMedia API</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/blog/basic-html5-audio-manipulation/">Basic HTML5 Audio Manipulation</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/blog/call-and-apply-methods-in-javascript/">Call and Apply Methods in JavaScript</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/blog/responsive-video/">Responsive Video</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/blog/display-latest-delicious-bookmarks-with-jquery/">Display latest delicious bookmarks with jQuery</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/blog/naive-bayes-classifier-in-javascript/">Naive Bayes Classifier in JavaScript</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/blog/make-an-awesome-tooltip-with-jquery/">Make an Awesome Tooltip with jQuery</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/blog/bitwise-operators-in-javascript/">Bitwise operators in JavaScript</a>
        </li>
	    
    </ul>
</div>

</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://example.org/" >
    &copy; 2019 My New Hugo Site
  </a>
    <div>










</div>
  </div>
</footer>

    

  <script src="/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
