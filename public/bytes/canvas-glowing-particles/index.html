<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>My New Hugo Site  | How to create glowing particles in canvas</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">

    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.52" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/dist/css/app.d98f2eb6bcd1eaedb7edf166bd16af26.css" rel="stylesheet">
    

    

    
      
    

    

    <meta property="og:title" content="How to create glowing particles in canvas" />
<meta property="og:description" content="How to create glowing particles in canvas." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/bytes/canvas-glowing-particles/" /><meta property="article:published_time" content="2016-01-15T00:00:00&#43;00:00"/>
<meta property="article:modified_time" content="2016-01-15T00:00:00&#43;00:00"/>

<meta itemprop="name" content="How to create glowing particles in canvas">
<meta itemprop="description" content="How to create glowing particles in canvas.">


<meta itemprop="datePublished" content="2016-01-15T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2016-01-15T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="556">



<meta itemprop="keywords" content="canvas,JavaScript," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="How to create glowing particles in canvas"/>
<meta name="twitter:description" content="How to create glowing particles in canvas."/>

  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="http://example.org/" class="f3 fw2 hover-white no-underline white-90 dib">
      My New Hugo Site
    </a>
    <div class="flex-l items-center">
      

      
      











    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">

    <header class="mt4 w-100">
      <p class="f6 b helvetica tracked">
          
        BYTES
      </p>
      <h1 class="f1 athelas mb1">How to create glowing particles in canvas</h1>
      
      <time class="f6 mv4 dib tracked" datetime="2016-01-15T00:00:00Z">January 15, 2016</time>
      
      
    </header>

    <section class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><p>Create glowing particles in canvas.</p>

<p><code>Particle.js</code>:</p>

<pre><code class="language-javascript">(function(root) {
  'use strict';

  function Particle(options) {
    var defaults = {
      ttl: 8000,
      maxXSpeed: 5,
      maxYSpeed: 2,
      maxRadius: 20,
      xVelocity: 4,
      yVelocity: 4,
      random: false,
      blink: true,
      speed: 30,
      containerWidth: window.innerWidth,
      containerHeight: window.innerHeight,
      context: null
    };

    var settings = merge(defaults, options);
    for (var name in settings) {
      this[name] = settings[name];
    }

    this.xStart =  this.containerWidth / 2;
    this.yStart = this.containerHeight / 2;

    if (!(this.context instanceof Object)) {
      throw new Error('Canvas `context` is required.');
    }
  }

  Particle.prototype.reset = function() {
    // position
    this.x = (this.random ? this.containerWidth * Math.random() : this.xStart);
    this.y = (this.random ? this.contaienrHeight * Math.random() : this.yStart);

    // size
    this.r = ((this.maxRadius - 1) * Math.random()) + 1;

    // speed and direction
    this.dx = (Math.random() * this.maxXSpeed) * (Math.random() &lt; 0.5 ? -1 : 1);
    this.dy = (Math.random() * this.maxYSpeed) * (Math.random() &lt; 0.5 ? -1 : 1);

    // half-life
    this.hl = (this.ttl / this.speed) * (this.r / this.maxRadius);

    // ratio of max speed and full opacity
    // opacity starting place (closer to hl the dimmer)
    this.rt = Math.random() * this.hl;

    console.log(this.hl)
    console.log(this.rt);

    // opacity rate
    this.rtt = Math.random() + 1;

    // stop
    this.stop = Math.random() * 0.2 + 0.4;

    // constant velocity
    this.xVelocity *= Math.random() * (Math.random() &lt; 0.5 ? -1 : 1);
    this.yVelocity *= Math.random() * (Math.random() &lt; 0.5 ? -1 : 1);
  };

  Particle.prototype.fade = function() {
    this.rt += this.rtt;
  };

  Particle.prototype.draw = function() {
    // Invert fade if at the min or max level
    if (this.blink &amp;&amp; (this.rt &lt;= 0 || this.rt &gt;= this.hl)) {
      this.rtt = this.rtt * -1;
    } else if (this.rt &gt;= this.hl) {
      this.reset();
    }

    var opacity = 1 - (this.rt / this.hl);

    this.context.beginPath();
    this.context.arc(this.x, this.y, this.r, 0, Math.PI * 2, true);
    this.context.closePath();

    var cr = this.r * opacity;

    var colorStop1 = '255,255,255';
    var colorStop2 = '10,43,55';
    var colorStop3 = '23,30,32';

    var gradient = this.context.createRadialGradient(this.x, this.y, 0, this.x, this.y, (cr &lt;= 0 ? 1 : cr));
    gradient.addColorStop(0, 'rgba('+ colorStop1 + ',' + opacity + ')');
    gradient.addColorStop(this.stop, 'rgba('+ colorStop2 + ',' + (opacity * 0.6) + ')');
    gradient.addColorStop(1.0, 'rgba('+ colorStop3 + ',0)');

    this.context.fillStyle = gradient;
    this.context.fill();
  };

  Particle.prototype.move = function() {
    this.x += (this.rt / this.hl) * this.dx;
    this.y += (this.rt / this.hl) * this.dy;

    if (this.x &gt; this.containerWidth || this.x &lt; 0) {
      this.dx *= -1;
    }

    if (this.y &gt; this.containerHeight || this.y &lt; 0) {
      this.dy *= -1;
    }
  };

  function merge(obj1, obj2) {
    var result = {};
    for (var attrname in obj1) {
      result[attrname] = obj1[attrname];
    }

    for (var attrname in obj2) {
      result[attrname] = obj2[attrname];
    }
    return result;
  }

  root.Particle = Particle;
})(this);
</code></pre>

<p><code>index.js</code>:</p>

<pre><code class="language-javascript">(function() {
  'use strict';

  var particleCount = 52;
  var particles = [];
  var speed = 60;

  var width = window.innerWidth;
  var height = window.innerHeight;
  var canvas = document.getElementById('canvas');
  var context = canvas.getContext('2d');

  canvas.width = width;
  canvas.height = height;

  for (var i = 0; i &lt; particleCount; i++) {
    particles[i] = new Particle({
      ttl: 20000,
      speed: speed,
      maxRadius: 60,
      containerWidth: width,
      containerHeight: height,
      context: context
    });

    particles[i].reset();
  }

  function draw() {
    context.clearRect(0, 0, width, height);

    for (var i = 0; i &lt; particles.length; i++) {
      particles[i].fade();
      particles[i].move();
      particles[i].draw();
    }
  }

  var interval = setInterval(draw,speed);

})();
</code></pre>

<p><code>index.css</code>:</p>

<pre><code class="language-css">html,
body,
canvas {
  width: 100%;
  height: 100%;
}

body {
  background: #000;
}
</code></pre>

<p><code>index.html</code>:</p>

<pre><code class="language-html">&lt;link rel=&quot;stylesheet&quot; href=&quot;./index.css&quot; /&gt;

&lt;canvas id=&quot;canvas&quot;&gt;&lt;/canvas&gt;

&lt;script src=&quot;./particle.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;./index.js&quot;&gt;&lt;/script&gt;
</code></pre>

<p>On github at <a href="https://github.com/miguelmota/canvas-particles">miguelmota/canvas-particles</a>.</p>
<ul class="pa0">
  
   <li class="list">
     <a href="/tags/canvas" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">canvas</a>
   </li>
  
   <li class="list">
     <a href="/tags/javascript" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">JavaScript</a>
   </li>
  
</ul>
<div class="mt6">
        
      </div>
    </section>

    <aside class="w-30-l mt6-l">




  <div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
    <p class="f5 b mb3">Related</p>
    <ul class="pa0 list">
	   
	     <li  class="mb2">
          <a href="/blog/pixelate-images-with-canvas/">Pixelate images with Canvas</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/bytes/arraybuffer-to-buffer/">How to convert an ArrayBuffer to Buffer</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/bytes/buffer-to-arraybuffer/">How to convert a Buffer to ArrayBuffer</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/bytes/slice-audiobuffer/">How to slice an AudioBuffer</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/bytes/babylonian-method/">How to calculate the square root using Babylonian method.</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/bytes/array-balance-points/">How to find the balance points of an array</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/bytes/array-difference/">How to find the difference between arrays</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/bytes/base-log/">How to find the logarithm of a number with specified base</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/bytes/digit-sum/">How to sum the digits of a number</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/bytes/array-without/">How to create an array excluding provided values</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/bytes/jshintrc/">.jshintrc boilerplate example</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/bytes/webgl-detect/">How to detect WebGL support</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/bytes/array-max/">How to find the maximum value in an array</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/bytes/array-min/">How to find the minimum value in an array</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/blog/k-means-clustering-in-javascript/">K-Means Clustering in JavaScript</a>
        </li>
	    
    </ul>
</div>

</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://example.org/" >
    &copy; 2019 My New Hugo Site
  </a>
    <div>










</div>
  </div>
</footer>

    

  <script src="/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
